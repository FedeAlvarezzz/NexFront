<div class="contenedor-principal">
  <div class="container">
    <div class="recovery-card">
      <!-- Email Panel -->
      <div class="panel" [class.hidden]="currentPanel !== 'email'">
        <h1 class="title">Recuperar Contraseña</h1>
        <p class="instruction">
          Ingresa tu dirección de correo electrónico y te enviaremos un código de verificación para restablecer tu contraseña.
        </p>
        <input 
          type="email" 
          class="email-input" 
          [(ngModel)]="email"
          placeholder="correo@ejemplo.com"
          (keypress)="onEmailKeyPress($event)"
          #emailInput
        />
        <button 
          class="action-btn" 
          [disabled]="isLoading"
          (click)="sendCode()"
        >
          <span *ngIf="isLoading" class="loading"></span>
          {{ isLoading ? 'ENVIANDO...' : 'ENVIAR CÓDIGO' }}
        </button>
      </div>

      <!-- Code Panel -->
      <div class="panel" [class.hidden]="currentPanel !== 'code'">
        <button class="back-btn" (click)="goBack()"> ← </button>
        <h1 class="title">Código de Verificación</h1>
        <p class="instruction">
          {{ codeInstruction }}
        </p>
        <div class="code-container">
          <input 
            *ngFor="let digit of codeDigits; let i = index"
            type="text" 
            class="code-input" 
            maxlength="1"
            [(ngModel)]="codeDigits[i]"
            (input)="onCodeInput($event, i)"
            (keydown)="onCodeKeyDown($event, i)"
            (paste)="onCodePaste($event)"
            [id]="'code-' + i"
          />
        </div>
        <button 
          class="action-btn" 
          [disabled]="isVerifying"
          (click)="changePassword()"
        >
          <span *ngIf="isVerifying" class="loading"></span>
          {{ isVerifying ? 'VERIFICANDO...' : 'CAMBIAR CONTRASEÑA' }}
        </button>
      </div>
    </div>
  </div>
</div>